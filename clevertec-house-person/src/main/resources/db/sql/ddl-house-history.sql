CREATE DOMAIN person_type AS
    VARCHAR NOT NULL CHECK (value = 'TENANT' OR value = 'OWNER');

CREATE TABLE IF NOT EXISTS House_History (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    person_id BIGINT REFERENCES Person(id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL,
    house_id BIGINT REFERENCES House(id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL,
    "date" TIMESTAMP NOT NULL,
    "type" person_type NOT NULL
);

